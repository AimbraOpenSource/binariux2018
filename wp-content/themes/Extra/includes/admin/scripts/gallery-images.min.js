/*! extra 21-03-2017 18:43:11 */
!function($){$(document).ready(function(){function reset_gallery_images_ids(){var gallery_images_ids=[];$gallery_images.find("li.gallery_image").each(function(){gallery_images_ids.push($(this).data("id"))}),gallery_images_ids=gallery_images_ids.join(","),$gallery_images_ids.val(gallery_images_ids)}function gallery_images_sortable(){$gallery_images.sortable({items:".gallery_image",cursor:"move",forcePlaceholderSize:!0,update:function(){reset_gallery_images_ids()}})}var gallery_images_frame,$gallery_images=$("#et_gallery_images"),$gallery_images_ids=$("#et_gallery_images_ids");gallery_images_sortable(),$gallery_images.on("click","span.delete",function(e){var $this=$(this),$parent=$this.closest("li.gallery_image");e.preventDefault(),$parent.slideUp("fast",function(){$parent.remove(),reset_gallery_images_ids()})}),$("#et_gallery_add_images").click(function(e){var $this=$(this);return e.preventDefault(),"undefined"!=typeof gallery_images_frame?void gallery_images_frame.open():(gallery_images_frame=wp.media.frames.gallery_images=wp.media({title:$this.data("title"),button:{text:$this.data("title")},states:[new wp.media.controller.Library({title:$this.data("title"),multiple:!0})]}),gallery_images_frame.open(),gallery_images_frame.on("select",function(){var selection=gallery_images_frame.state().get("selection");selection.each(function(selection_item){var thumb_sizes,thumb_url;selection_item.has("id")&&(thumb_sizes=selection_item.get("sizes"),thumb_url=thumb_sizes.hasOwnProperty("thumbnail")?thumb_sizes.thumbnail.url:thumb_sizes.full.url,$gallery_images.append('<li class="gallery_image" data-id="'+selection_item.get("id")+'">								<span class="delete">-</span>								<img src="'+thumb_url+'" />							</li>'))}),reset_gallery_images_ids()}),void gallery_images_sortable())})})}(jQuery);